/*jslint plusplus: true *//*globals getgravc: true, dpper: true, dspace: true
*//*global mag: true, dot: true, sign: true
 *//*global document: true
 *//*global nm2m: true, ft2m: true, jday : true
*//*global opsmode: true
*//*global
  alert: true,
  debug: true,
  window: true
*//*global gstime: true, opsmode:true, xke:true, j2:true *//*globals days2mdh: true *//*global mag: true, small: true, infinite: true, twopi: true, angl: true,
  halfpi: true, newtonnu: true, cross: true, dot: true, sign: true,
  UNDEFINED: true,
*//*globals getgravc: true, dpper: true, dspace: true *//*global getgravc: true, initl: true, dscom: true, dpper: true, dsinit: true,
 sgp4: true
 *//*global twoline2rv: true, sgp4: true, invjday: true, rv2coe: true,
  tumin: true, mu: true, radiusearthkm: true, xke: true,
  j2: true, j3: true, j4: true, j3oj2: true, opsmode: true,
  input: true,
  document: true,
  getgravc: true,
  alert: true,
  outfile: true,
  fprintf1: true,
  sprintf: true,
  debug: true,
*//*global
  getgravc: true,
  debug: true,
  days2mdh: true,
  jday: true,
  input: true, // reads from HTML by id="prompt string"
  sgp4init: true,
  tumin: true, mu: true, radiusearthkm:true, xke: true, j2: true, j3: true, j4: true, j3oj2: true,
 */// -----------------------------------------------------------------------------
//
//                              isat
//
//  This is the combined code of the translated Miura's MATLAB for minification.
//
// -----------------------------------------------------------------------------
// angl.js
function angl(e,t){"use strict";var n=1e-8,r=999999.1,i=mag(e),s=mag(t),o,u;if(i*s>n*n){o=dot(e,t)/(i*s);Math.abs(o)>1&&(o=sign(o)*1);u=Math.acos(o)}else u=r;return u}function writeId(e,t){"use strict";document.getElementById(e).innerHTML+=t+"<br/>\n"}function debug(e){"use strict";document.getElementById("debug").innerHTML+=e+"\n"}function outfile(e){"use strict";document.getElementById("outfile").innerHTML+=e}function fprintf1(e){"use strict";document.getElementById("fprintf1").innerHTML+=e}function days2mdh(e,t){"use strict";for(i=1;i<=12;i+=1){lmonth[i]=31;i===2&&(lmonth[i]=28);if(i===4||i===6||i===9||i===11)lmonth[i]=30}dayofyr=Math.floor(t);(e-1900)%4===0&&(lmonth[2]=29);i=1;inttemp=0;while(dayofyr>inttemp+lmonth[i]&&i<12){inttemp+=lmonth[i];i+=1}mon=i;day=dayofyr-inttemp;temp=(t-dayofyr)*24;hr=Math.floor(temp);temp=(temp-hr)*60;minute=Math.floor(temp);sec=(temp-minute)*60;julianday=jday(e,mon,day,hr,minute,sec);return[mon,day,hr,minute,sec]}function dpper(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F){"use strict";if(typeof opsmode=="undefined")throw new Error('Global opsmode is undefined, must be "a" or "i"');if(opsmode!=="a"&&opsmode!=="i")throw new Error('Global must be "a" or "i" but opsmode='+opsmode);var I=2*Math.PI,q=119459e-10,R=.01675,U=.00015835218,z=.0549,W=M+q*b,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et;D==="y"&&(W=M);X=W+2*R*Math.sin(W);V=Math.sin(X);$=.5*V*V-.25;J=-0.5*V*Math.cos(X);K=u*$+a*J;Q=d*$+v*J;G=m*$+g*J+y*V;Y=f*$+l*J+c*V;Z=h*$+p*J;W=O+U*b;D==="y"&&(W=O);X=W+2*z*Math.sin(W);V=Math.sin(X);$=.5*V*V-.25;J=-0.5*V*Math.cos(X);et=t*$+e*J;tt=N*$+C*J;nt=k*$+L*J+A*V;rt=w*$+E*J+S*V;it=x*$+T*J;st=K+et;ot=Q+tt;ut=G+nt;at=Y+rt;ft=Z+it;if(D==="n"){st-=n;ot-=s;ut-=o;at-=r;ft-=i;H+=ot;P+=st;lt=Math.sin(H);ct=Math.cos(H);if(H>=.2){ft/=lt;at-=ct*ft;j+=at;B+=ft;F+=ut}else{ht=Math.sin(B);pt=Math.cos(B);dt=lt*ht;yt=lt*pt;mt=ft*pt+ot*ct*ht;gt=-ft*ht+ot*ct*pt;dt+=mt;yt+=gt;B%=I;B<0&&opsmode==="a"&&(B+=I);bt=F+j+ct*B;wt=ut+at-ot*B*lt;bt+=wt;Et=B;B=Math.atan2(dt,yt);B<0&&opsmode==="a"&&(B+=I);Math.abs(Et-B)>Math.PI&&(B<Et?B+=I:B-=I);F+=ut;j=bt-F-ct*B}}return[P,H,B,j,F]}function dscom(e,t,n,r,i,s,o){"use strict";var u=.01675,a=.0549,f=29864797e-13,l=4.7968065e-7,c=.39785416,h=.91744867,p=.1945905,d=-0.98088458,v=2*Math.PI,m=o,g=t,y=Math.sin(s),b=Math.cos(s),w=Math.sin(n),E=Math.cos(n),S=Math.sin(i),x=Math.cos(i),T=g*g,N=1-T,C=Math.sqrt(N),k=0,L=0,A=0,O=0,M=0,_=e+18261.5+r/1440,D=(4.523602-.00092422029*_)%v,P=Math.sin(D),H=Math.cos(D),B=.91375164-.03568096*H,j=Math.sqrt(1-B*B),F=.089683511*P/j,I=Math.sqrt(1-F*F),q=5.8351514+.001944368*_,R=.39785416*P/j,U=I*H+.91744867*F*P,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt,Kt,Qt,Gt,Yt,Zt,en,tn,nn,rn,sn,on,un,an,fn,ln,cn,hn,pn,dn,vn,mn,gn,yn,bn,wn,En,Sn,xn,Tn,Nn,Cn,kn,Ln;R=Math.atan2(R,U);R=q+R-D;z=Math.cos(R);W=Math.sin(R);X=p;V=d;$=h;J=c;K=b;Q=y;G=f;Y=1/m;for(Z=1;Z<=2;Z+=1){et=X*K+V*$*Q;tt=-V*K+X*$*Q;nt=-X*Q+V*$*K;rt=V*J;it=V*Q+X*$*K;st=X*J;ot=x*nt+S*rt;ut=x*it+S*st;at=-S*nt+x*rt;ft=-S*it+x*st;lt=et*E+ot*w;ct=tt*E+ut*w;ht=-et*w+ot*E;pt=-tt*w+ut*E;dt=at*w;vt=ft*w;mt=at*E;gt=ft*E;yt=12*lt*lt-3*ht*ht;bt=24*lt*ct-6*ht*pt;wt=12*ct*ct-3*pt*pt;Et=3*(et*et+ot*ot)+yt*T;St=6*(et*tt+ot*ut)+bt*T;xt=3*(tt*tt+ut*ut)+wt*T;Tt=-6*et*at+T*(-24*lt*mt-6*ht*dt);Nt=-6*(et*ft+tt*at)+T*(-24*(ct*mt+lt*gt)-6*(ht*vt+pt*dt));Ct=-6*tt*ft+T*(-24*ct*gt-6*pt*vt);kt=6*ot*at+T*(24*lt*dt-6*ht*mt);Lt=6*(ut*at+ot*ft)+T*(24*(ct*dt+lt*vt)-6*(pt*mt+ht*gt));At=6*ut*ft+T*(24*ct*vt-6*pt*gt);Et=Et+Et+N*yt;St=St+St+N*bt;xt=xt+xt+N*wt;Ot=G*Y;Mt=-0.5*Ot/C;_t=Ot*C;Dt=-15*g*_t;Pt=lt*ht+ct*pt;Ht=ct*ht+lt*pt;Bt=ct*pt-lt*ht;if(Z===1){jt=Dt;Ft=Mt;It=Ot;qt=_t;Rt=Pt;Ut=Ht;zt=Bt;Wt=Et;Xt=St;Vt=xt;$t=Tt;Jt=Nt;Kt=Ct;Qt=kt;Gt=Lt;Yt=At;Zt=yt;en=bt;tn=wt;X=z;V=W;$=B;J=j;K=I*b+F*y;Q=y*I-b*F;G=l}}nn=(4.7199672+.2299715*_-q)%v;rn=(6.2565837+.017201977*_)%v;sn=2*jt*Ut;on=2*jt*zt;un=2*Ft*Jt;an=2*Ft*(Kt-$t);fn=-2*It*Xt;ln=-2*It*(Vt-Wt);cn=-2*It*(-21-9*T)*u;hn=2*qt*en;pn=2*qt*(tn-Zt);dn=-18*qt*u;vn=-2*Ft*Gt;mn=-2*Ft*(Yt-Qt);gn=2*Dt*Ht;yn=2*Dt*Bt;bn=2*Mt*Nt;wn=2*Mt*(Ct-Tt);En=-2*Ot*St;Sn=-2*Ot*(xt-Et);xn=-2*Ot*(-21-9*T)*a;Tn=2*_t*bt;Nn=2*_t*(wt-yt);Cn=-18*_t*a;kn=-2*Mt*Lt;Ln=-2*Mt*(At-kt);return[S,x,w,E,y,b,_,yn,gn,g,T,q,k,O,M,L,A,C,sn,on,hn,pn,dn,vn,mn,un,an,fn,ln,cn,Dt,Mt,Ot,_t,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt,Kt,Qt,Gt,Yt,Zt,en,tn,Tn,Nn,Cn,kn,Ln,bn,wn,En,Sn,xn,m,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,yt,bt,wt,nn,rn]}function dsinit(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V){"use strict";var $=2*Math.PI,J=0,K=17891679e-13,Q=21460748e-13,G=2.2123015e-7,Y=17891679e-13,Z=7.3636953e-9,et=2.1765803e-9,tt=.0043752690880113,nt=3.7393792e-7,rt=1.1428639e-7,it=2/3,st=.00015835218,ot=119459e-10,ut=0,at=0,ft=0,lt=0,ct=0,ht=0,pt=0,dt=0,vt=0,mt=0,gt=0,yt=0,bt=0,wt=0,Et=0,St=0,xt=0,Tt=0,Nt=0,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt,Kt,Qt,Gt,Yt,Zt,en,tn,nn,rn,sn,on,un,an,fn,ln,cn,hn,pn,dn,vn,mn,gn,yn,bn,wn,En;z<.0052359877&&z>.0034906585&&(ut=1);z>=.00826&&z<=.00924&&I>=.5&&(ut=2);Ct=f*ot*p;kt=l*ot*(m+g);Lt=-ot*c*(d+v-14-6*t);At=h*ot*(w+E-6);Ot=-ot*l*(y+b);if(R<.052359877||R>Math.PI-.052359877)Ot=0;a!==0&&(Ot/=a);Mt=At-e*Ot;Dt=Ct+r*st*u;Pt=kt+i*st*(D+P);Ht=Lt-st*s*(M+_-14-6*t);_t=o*st*(j+F-6);jt=-st*i*(H+B);if(R<.052359877||R>Math.PI-.052359877)jt=0;Ft=Mt+_t;It=Ot;if(a!==0){Ft-=e/a*jt;It+=jt/a}qt=0;Rt=(T+x*tt)%$;I+=Dt*S;R+=Pt*S;q+=Ft*S;W+=It*S;U+=Ht*S;if(ut!==0){J=Math.pow(z/xke,it);if(ut===2){Ut=e*e;zt=I;I=X;Wt=t;t=V;Xt=I*t;Vt=-0.306-(I-.64)*.44;if(I<=.65){$t=3.616-13.247*I+16.29*t;Jt=-19.302+117.39*I-228.419*t+156.591*Xt;Kt=-18.9068+109.7927*I-214.6334*t+146.5816*Xt;Qt=-41.122+242.694*I-471.094*t+313.953*Xt;Gt=-146.407+841.88*I-1629.014*t+1083.435*Xt;Yt=-532.114+3017.977*I-5740.032*t+3708.276*Xt}else{$t=-72.099+331.819*I-508.738*t+266.724*Xt;Jt=-346.844+1582.851*I-2415.925*t+1246.113*Xt;Kt=-342.585+1554.908*I-2366.899*t+1215.972*Xt;Qt=-1052.797+4758.686*I-7193.992*t+3651.957*Xt;Gt=-3581.69+16178.11*I-24462.77*t+12422.52*Xt;I>.715?Yt=-5149.66+29936.92*I-54087.36*t+31324.56*Xt:Yt=1464.74-4664.75*I+3763.64*t}if(I<.7){Zt=-919.2277+4988.61*I-9064.77*t+5542.21*Xt;en=-822.71072+4568.6173*I-8491.4146*t+5337.524*Xt;tn=-853.666+4690.25*I-8624.77*t+5341.4*Xt}else{Zt=-37995.78+161616.52*I-229838.2*t+109377.94*Xt;en=-51752.104+218913.95*I-309468.16*t+146349.42*Xt;tn=-40023.88+170470.89*I-242699.48*t+115605.82*Xt}nn=a*a;rn=.75*(1+2*e+Ut);sn=1.5*nn;on=1.875*a*(1-2*e-3*Ut);un=-1.875*a*(1+2*e-3*Ut);an=35*nn*rn;fn=39.375*nn*nn;ln=9.84375*a*(nn*(1-2*e-5*Ut)+.33333333*(-2+4*e+6*Ut));cn=a*(4.92187512*nn*(-2-4*e+10*Ut)+6.56250012*(1+2*e-3*Ut));hn=29.53125*a*(2-8*e+Ut*(-12+8*e+10*Ut));pn=29.53125*a*(-2-8*e+Ut*(12+8*e-10*Ut));dn=z*z;vn=J*J;mn=3*dn*vn;gn=mn*Y;at=gn*rn*Vt;ft=gn*sn*$t;mn*=J;gn=mn*nt;lt=gn*on*Jt;ct=gn*un*Kt;mn*=J;gn=2*mn*Z;ht=gn*an*Qt;pt=gn*fn*Gt;mn*=J;gn=mn*rt;dt=gn*ln*Yt;vt=gn*cn*tn;gn=2*mn*et;mt=gn*hn*en;gt=gn*pn*Zt;xt=(N+L+L-Rt-Rt)%$;St=C+Ht+2*(A+It-tt)-k;I=zt;t=Wt}if(ut===1){yn=1+t*(-2.5+.8125*t);Jt=1+2*t;bn=1+t*(-6+6.60937*t);rn=.75*(1+e)*(1+e);wn=.9375*a*a*(1+3*e)-.75*(1+e);En=1+e;En=1.875*En*En*En;yt=3*z*z*J*J;bt=2*yt*rn*yn*K;wt=3*yt*En*bn*G*J;yt=yt*wn*Jt*Q*J;xt=(N+L+n-Rt)%$;St=C+O-tt+Ht+Ft+It-k}Tt=xt;Nt=k;Et=0;z=k+qt}return[I,q,R,U,z,W,ut,Et,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,Dt,Pt,Ht,qt,It,Ft,yt,bt,wt,St,xt,Tt,Nt]}function dspace(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H){"use strict";var B=2*Math.PI,j=.13130908,F=2.8843198,I=.37448087,q=5.7686396,R=.95240898,U=1.8014998,z=1.050833,W=4.4108898,X=.0043752690880113,V=720,$=-720,J=259200,K=0,Q=(x+S*X)%B,G,Y,Z,et,tt,nt,rt,it,st,ot,ut;L+=l*E;O+=d*E;A+=g*E;P+=m*E;_+=v*E;G=0;if(y!==0){if(k===0||E*k<=0||Math.abs(E)<Math.abs(k)){k=0;D=C;M=N}E>=0?Y=V:Y=$;Z=381;et=0;while(Z===381){if(y!==2){tt=c*Math.sin(M-j)+h*Math.sin(2*(M-F))+p*Math.sin(3*(M-I));nt=D+T;rt=c*Math.cos(M-j)+2*h*Math.cos(2*(M-F))+3*p*Math.cos(3*(M-I));rt*=nt}else{it=b+w*k;st=it+it;ot=M+M;tt=e*Math.sin(st+M-q)+t*Math.sin(M-q)+n*Math.sin(it+M-R)+r*Math.sin(-it+M-R)+i*Math.sin(st+ot-U)+s*Math.sin(ot-U)+o*Math.sin(it+M-z)+u*Math.sin(-it+M-z)+a*Math.sin(it+ot-W)+f*Math.sin(-it+ot-W);nt=D+T;rt=e*Math.cos(st+M-q)+t*Math.cos(M-q)+n*Math.cos(it+M-R)+r*Math.cos(-it+M-R)+o*Math.cos(it+M-z)+u*Math.cos(-it+M-z)+2*(i*Math.cos(st+ot-U)+s*Math.cos(ot-U)+a*Math.cos(it+ot-W)+f*Math.cos(-it+ot-W));rt*=nt}if(Math.abs(E-k)>=V){et=0;Z=381}else{G=E-k;Z=0}if(Z===381){M=M+nt*Y+tt*J;D=D+tt*Y+rt*J;k+=Y}}H=D+tt*G+rt*G*G*.5;ut=M+nt*G+tt*G*G*.5;if(y!==1){_=ut-2*P+2*Q;K=H-C}else{_=ut-P-A+Q;K=H-C}H=C+K}return[k,L,A,O,M,_,D,P,K,H]}function getgravc(e){"use strict";var t,n,r,i,s,o,u,a;switch(e){case 721:t=398600.79964;n=6378.135;r=.0743669161;i=1/r;s=.001082616;o=-0.00000253881;u=-0.00000165597;a=o/s;break;case 72:t=398600.8;n=6378.135;r=60/Math.sqrt(n*n*n/t);i=1/r;s=.001082616;o=-0.00000253881;u=-0.00000165597;a=o/s;break;case 84:t=398600.5;n=6378.137;r=60/Math.sqrt(n*n*n/t);i=1/r;s=.00108262998905;o=-0.00000253215306;u=-0.00000161098761;a=o/s;break;default:alert("getgravc: unknown gravity option: "+e);throw new Error("getgravc: unknown gravity option: "+e)}return[i,t,n,r,s,o,u,a]}function gstime(e){"use strict";var t=2*Math.PI,n=Math.PI/180,r,i;r=(e-2451545)/36525;i=-0.0000062*r*r*r+.093104*r*r+3164400184.812866*r+67310.54841;i=i*n/240%t;i<0&&(i+=t);return i}function initl(e,t,n,r,i){"use strict";if(typeof opsmode=="undefined")throw new Error("opsmode undefined");if(typeof xke=="undefined")throw new Error("xke undefined");if(typeof j2=="undefined")throw new Error("j2 undefined");var s=2/3,o=e*e,u=1-o,a=Math.sqrt(u),f=Math.cos(n),l=f*f,c=Math.pow(xke/r,s),h=.75*j2*(3*l-1)/(a*u),p=h/(c*c),d=c*(1-p*p-p*(1/3+134*p*p/81)),v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D;p=h/(d*d);r/=1+p;v=Math.pow(xke/r,s);m=Math.sin(n);g=v*u;y=1-5*l;b=-y-l-l;w=1/v;E=1/e;S=g*g;x=v*(1-e);T="n";if(opsmode!=="a")N=gstime(t+2433281.5);else{C=t-7305;k=Math.floor(C+1e-8);L=C-k;A=.017202791694070362;O=1.7321343856509375;M=5.075514194322695e-15;_=6.283185307179586;D=A+_;N=(O+A*k+D*L+C*C*M)%_}N<0&&(N+=_);return[w,v,b,y,f,l,E,o,T,u,S,x,a,m,N,r]}function invjday(e){"use strict";var t=e-2415019.5,n=t/365.25,r=1900+Math.floor(n),i=Math.floor((r-1901)*.25),s=t-((r-1900)*365+i),o,u,a,f,l,c;if(s<1){r-=1;i=Math.floor((r-1901)*.25);s=t-((r-1900)*365+i)}c=days2mdh(r,s);o=c.shift();u=c.shift();a=c.shift();f=c.shift();l=c.shift();return[r,o,u,a,f,l]}function jday(e,t,n,r,i,s){"use strict";return 367*e-Math.floor(7*(e+Math.floor((t+9)/12))*.25)+Math.floor(275*t/9)+n+1721013.5+((s/60+i)/60+r)/24}function mag(e){"use strict";var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=0;Math.abs(t)>=1e-16&&(n=Math.sqrt(t));return n}function sign(e){"use strict";return e<0?-1:e>0?1:0}function cross(e,t){"use strict";var n=e[0],r=e[1],i=e[2],s=t[0],o=t[1],u=t[2];return[r*u-o*i,i*s-u*n,n*o-s*r]}function dot(e,t){"use strict";var n=0,r=Math.min(e.length,t.length),i;for(i=0;i<r;i+=1)n+=e[i]*t[i];return n}function sinh(e){"use strict";return(Math.pow(Math.E,e)-Math.pow(Math.E,-e))/2}function asinh(e){"use strict";return Math.log(e+Math.sqrt(e*e+1))}function newtonnu(e,t){"use strict";var n=999999.9,r=999999.9,i=1e-8,s,o;if(Math.abs(e)<i){r=t;n=t}else if(e<1-i){s=Math.sqrt(1-e*e)*Math.sin(t)/(1+e*Math.cos(t));o=(e+Math.cos(t))/(1+e*Math.cos(t));n=Math.atan2(s,o);r=n-e*Math.sin(n)}else if(e>1+i)if(e>1&&Math.abs(t)+1e-5<Math.PI-Math.acos(1/e)){s=Math.sqrt(e*e-1)*Math.sin(t)/(1+e*Math.cos(t));n=asinh(s);r=e*sinh(n)-n}else if(Math.abs(t)<168*Math.PI/180){n=Math.tan(t*.5);r=n+n*n*n/3}if(e<1){r%=2*Math.PI;r<0&&(r+=2*Math.PI);n%=2*Math.PI}return[n,r]}function rv2coe(e,t,n){"use strict";var r,i,s,o,u=[],a,f,l,c=[],h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L;r=mag(e);i=mag(t);s=cross(e,t);o=mag(s);if(o>small){u[0]=-s[1];u[1]=s[0];u[2]=0;a=mag(u);f=i*i-n/r;l=dot(e,t);for(h in[0,1,2])c[h]=(f*e[h]-l*t[h])/n;p=mag(c);d=i*i*.5-n/r;Math.abs(d)>small?v=-n/(2*d):v=infinite;m=o*o/n;g=s[2]/o;y=Math.acos(g);b="ei";if(p<small){alert("ecc<small");y<small||Math.abs(y-Math.PI)<small?b="ce":b="ci"}else if(y<small||Math.abs(y-Math.PI)<small){alert("eliptical/para/hyper: type=ee");b="ee"}if(a>small){w=u[0]/a;Math.abs(w)>1&&(w=sign(w));E=Math.acos(w);u[1]<0&&(E=twopi-E)}else{alert("omega=UNDEFINED");E=UNDEFINED}if(b==="ei"){S=angl(u,c);c[2]<0&&(S=twopi-S)}else{alert("argp=UNDEFINED");S=UNDEFINED}if(b[0]==="e"){x=angl(c,e);l<0&&(x=twopi-x)}else{alert("nu=UNDEFINED");x=UNDEFINED}if(b==="ci"){T=angl(u,e);e[2]<0&&(T=twopi-T);N=T}else T=UNDEFINED;if(p>small&&b==="ee"){w=c[0]/p;Math.abs(w)>1&&(w=sign(w));C=Math.acos(w);c[1]<0&&(C=twopi-C);y>halfpi&&(C=twopi-C)}else C=UNDEFINED;if(r>small&&b==="ce"){w=e[0]/r;Math.abs(w)>1&&(w=sign(w));k=Math.acos(w);e[1]<0&&(k=twopi-k);y>halfpi&&(k=twopi-k);N=k}else k=UNDEFINED;if(b[0]==="e"){L=newtonnu(p,x);N=L[1]}}else{m=UNDEFINED;v=UNDEFINED;p=UNDEFINED;y=UNDEFINED;E=UNDEFINED;S=UNDEFINED;x=UNDEFINED;N=UNDEFINED;T=UNDEFINED;k=UNDEFINED;C=UNDEFINED}return[m,v,p,y,E,S,x,N,T,k,C]}function sgp4(e,t){"use strict";var n=2*Math.PI,r=2/3,i=1.5e-12,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft=[],lt=[],ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It,qt,Rt;s=getgravc(72);o=s.shift();u=s.shift();a=s.shift();f=s.shift();l=s.shift();c=s.shift();h=s.shift();p=s.shift();d=a*f/60;e.t=t;e.error=0;v=e.mo+e.mdot*e.t;m=e.argpo+e.argpdot*e.t;g=e.nodeo+e.nodedot*e.t;y=m;b=v;w=e.t*e.t;E=g+e.nodecf*w;S=1-e.cc1*e.t;x=e.bstar*e.cc4*e.t;T=e.t2cof*w;if(e.isimp!==1){N=e.omgcof*e.t;C=e.xmcof*(Math.pow(1+e.eta*Math.cos(v),3)-e.delmo);k=N+C;b=v+k;y=m-k;L=w*e.t;A=L*e.t;S=S-e.d2*w-e.d3*L-e.d4*A;x+=e.bstar*e.cc5*(Math.sin(b)-e.sinmao);T=T+e.t3cof*L+A*(e.t4cof+e.t*e.t5cof)}M=e.no;_=e.ecco;D=e.inclo;if(e.method==="d"){P=e.t;s=dspace(e.d2201,e.d2211,e.d3210,e.d3222,e.d4410,e.d4422,e.d5220,e.d5232,e.d5421,e.d5433,e.dedt,e.del1,e.del2,e.del3,e.didt,e.dmdt,e.dnodt,e.domdt,e.irez,e.argpo,e.argpdot,e.t,P,e.gsto,e.xfact,e.xlamo,e.no,e.atime,_,y,D,e.xli,b,e.xni,E,M);e.atime=s.shift();_=s.shift();y=s.shift();D=s.shift();e.xli=s.shift();b=s.shift();e.xni=s.shift();E=s.shift();H=s.shift();M=s.shift()}M<=0&&(e.error=2);B=Math.pow(f/M,r)*S*S;M=f/Math.pow(B,1.5);_-=x;if(_>=1||_<-0.001||B<.95)e.error=1;_<1e-6&&(_=1e-6);b+=e.no*T;q=b+y+E;F=_*_;k=1-F;E%=n;y%=n;q%=n;b=(q-y-E)%n;R=Math.sin(D);U=Math.cos(D);z=_;W=D;X=y;V=E;$=b;J=R;K=U;if(e.method==="d"){s=dpper(e.e3,e.ee2,e.peo,e.pgho,e.pho,e.pinco,e.plo,e.se2,e.se3,e.sgh2,e.sgh3,e.sgh4,e.sh2,e.sh3,e.si2,e.si3,e.sl2,e.sl3,e.sl4,e.t,e.xgh2,e.xgh3,e.xgh4,e.xh2,e.xh3,e.xi2,e.xi3,e.xl2,e.xl3,e.xl4,e.zmol,e.zmos,e.inclo,e.init,z,W,V,X,$);z=s.shift();W=s.shift();V=s.shift();X=s.shift();$=s.shift();if(W<0){W=-W;V+=Math.PI;X-=Math.PI}if(z<0||z>1)e.error=3}if(e.method==="d"){J=Math.sin(W);K=Math.cos(W);e.aycof=-0.5*p*J;Math.abs(K+1)>1.5e-12?e.xlcof=-0.25*p*J*(3+5*K)/(1+K):e.xlcof=-0.25*p*J*(3+5*K)/i}Q=z*Math.cos(X);k=1/(B*(1-z*z));G=z*Math.sin(X)+k*e.aycof;Y=$+X+V+k*e.xlcof*Q;Z=(Y-V)%n;et=Z;tt=9999.9;nt=1;while(Math.abs(tt)>=1e-12&&nt<=10){rt=Math.sin(et);it=Math.cos(et);tt=1-it*Q-rt*G;tt=(Z-G*it+Q*rt-et)/tt;Math.abs(tt)>=.95&&(tt>0?tt=.95:tt=-0.95);et+=tt;nt+=1}st=Q*it+G*rt;ot=Q*rt-G*it;ut=Q*Q+G*G;at=B*(1-ut);if(at<0){e.error=4;ft=[0,0,0];lt=[0,0,0]}else{ct=B*(1-st);ht=Math.sqrt(B)*ot/ct;pt=Math.sqrt(at)/ct;dt=Math.sqrt(1-ut);k=ot/(1+dt);vt=B/ct*(rt-G-Q*k);mt=B/ct*(it-Q+G*k);gt=Math.atan2(vt,mt);yt=(mt+mt)*vt;bt=1-2*vt*vt;k=1/at;wt=.5*l*k;Et=wt*k;if(e.method==="d"){St=K*K;e.con41=3*St-1;e.x1mth2=1-St;e.x7thm1=7*St-1}xt=ct*(1-1.5*Et*dt*e.con41)+.5*wt*e.x1mth2*bt;gt-=.25*Et*e.x7thm1*yt;Tt=V+1.5*Et*K*yt;Nt=W+1.5*Et*K*J*bt;Ct=ht-M*wt*e.x1mth2*yt/f;kt=pt+M*wt*(e.x1mth2*bt+1.5*e.con41)/f;Lt=Math.sin(gt);At=Math.cos(gt);Ot=Math.sin(Tt);Mt=Math.cos(Tt);_t=Math.sin(Nt);Dt=Math.cos(Nt);Pt=-Ot*Dt;Ht=Mt*Dt;Bt=Pt*Lt+Mt*At;jt=Ht*Lt+Ot*At;Ft=_t*Lt;It=Pt*At-Mt*Lt;qt=Ht*At-Ot*Lt;Rt=_t*At;ft[0]=xt*Bt*a;ft[1]=xt*jt*a;ft[2]=xt*Ft*a;lt[0]=(Ct*Bt+kt*It)*d;lt[1]=(Ct*jt+kt*qt)*d;lt[2]=(Ct*Ft+kt*Rt)*d}xt<1&&(e.error=6);return[e,ft,lt]}function sgp4init(e,t,n,r,i,s,o,u,a,f){"use strict";var l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt,Kt,Qt,Gt,Yt,Zt,en,tn,nn,rn,sn,on,un,an;t.isimp=0;t.method="n";t.aycof=0;t.con41=0;t.cc1=0;t.cc4=0;t.cc5=0;t.d2=0;t.d3=0;t.d4=0;t.delmo=0;t.eta=0;t.argpdot=0;t.omgcof=0;t.sinmao=0;t.t=0;t.t2cof=0;t.t3cof=0;t.t4cof=0;t.t5cof=0;t.x1mth2=0;t.x7thm1=0;t.mdot=0;t.nodedot=0;t.xlcof=0;t.xmcof=0;t.nodecf=0;t.irez=0;t.d2201=0;t.d2211=0;t.d3210=0;t.d3222=0;t.d4410=0;t.d4422=0;t.d5220=0;t.d5232=0;t.d5421=0;t.d5433=0;t.dedt=0;t.del1=0;t.del2=0;t.del3=0;t.didt=0;t.dmdt=0;t.dnodt=0;t.domdt=0;t.e3=0;t.ee2=0;t.peo=0;t.pgho=0;t.pho=0;t.pinco=0;t.plo=0;t.se2=0;t.se3=0;t.sgh2=0;t.sgh3=0;t.sgh4=0;t.sh2=0;t.sh3=0;t.si2=0;t.si3=0;t.sl2=0;t.sl3=0;t.sl4=0;t.gsto=0;t.xfact=0;t.xgh2=0;t.xgh3=0;t.xgh4=0;t.xh2=0;t.xh3=0;t.xi2=0;t.xi3=0;t.xl2=0;t.xl3=0;t.xl4=0;t.xlamo=0;t.zmol=0;t.zmos=0;t.atime=0;t.xli=0;t.xni=0;t.bstar=n;t.ecco=r;t.argpo=s;t.inclo=o;t.mo=u;t.no=a;t.nodeo=f;Zt=getgravc(e);c=Zt.shift();h=Zt.shift();p=Zt.shift();d=Zt.shift();v=Zt.shift();m=Zt.shift();g=Zt.shift();y=Zt.shift();b=78/p+1;w=Math.pow(42/p,4);E=2/3;S=1.5e-12;t.init="y";t.t=0;Zt=initl(t.ecco,i,t.inclo,t.no,t.satnum);T=Zt.shift();N=Zt.shift();t.con41=Zt.shift();C=Zt.shift();k=Zt.shift();L=Zt.shift();A=Zt.shift();O=Zt.shift();t.method=Zt.shift();M=Zt.shift();_=Zt.shift();D=Zt.shift();P=Zt.shift();H=Zt.shift();t.gsto=Zt.shift();t.no=Zt.shift();t.error=0;D<1&&(t.error=5);if(M>=0||t.no>=0){t.isimp=0;D<220/p+1&&(t.isimp=1);B=b;j=w;F=(D-1)*p;if(F<156){B=F-78;F<98&&(B=20);j=Math.pow((120-B)/p,4);B=B/p+1}I=1/_;q=1/(N-B);t.eta=N*t.ecco*q;R=t.eta*t.eta;U=t.ecco*t.eta;z=Math.abs(1-R);W=j*Math.pow(q,4);X=W/Math.pow(z,3.5);V=X*t.no*(N*(1+1.5*R+U*(4+R))+.375*v*q/z*t.con41*(8+3*R*(8+R)));t.cc1=t.bstar*V;$=0;t.ecco>1e-4&&($=-2*W*q*y*t.no*H/t.ecco);t.x1mth2=1-L;t.cc4=2*t.no*X*N*M*(t.eta*(2+.5*R)+t.ecco*(.5+2*R)-v*q/(N*z)*(-3*t.con41*(1-2*U+R*(1.5-.5*U))+.75*t.x1mth2*(2*R-U*(1+R))*Math.cos(2*t.argpo)));t.cc5=2*X*N*M*(1+2.75*(R+U)+U*R);J=L*L;K=1.5*v*I*t.no;Q=.5*K*v*I;G=-0.46875*g*I*I*t.no;t.mdot=t.no+.5*K*P*t.con41+.0625*Q*P*(13-78*L+137*J);t.argpdot=-0.5*K*C+.0625*Q*(7-114*L+395*J)+G*(3-36*L+49*J);Y=-K*k;t.nodedot=Y+(.5*Q*(4-19*L)+2*G*(3-7*L))*k;Z=t.argpdot+t.nodedot;t.omgcof=t.bstar*$*Math.cos(t.argpo);t.xmcof=0;t.ecco>1e-4&&(t.xmcof=-E*W*t.bstar/U);t.nodecf=3.5*M*Y*t.cc1;t.t2cof=1.5*t.cc1;Math.abs(k+1)>1.5e-12?t.xlcof=-0.25*y*H*(3+5*k)/(1+k):t.xlcof=-0.25*y*H*(3+5*k)/S;t.aycof=-0.5*y*H;t.delmo=Math.pow(1+t.eta*Math.cos(t.mo),3);t.sinmao=Math.sin(t.mo);t.x7thm1=7*L-1;if(2*Math.PI/t.no>=225){t.method="d";t.isimp=1;et=0;tt=t.inclo;Zt=dscom(i,t.ecco,t.argpo,et,t.inclo,t.nodeo,t.no);rt=Zt.shift();it=Zt.shift();st=Zt.shift();ot=Zt.shift();ut=Zt.shift();at=Zt.shift();ft=Zt.shift();t.e3=Zt.shift();t.ee2=Zt.shift();lt=Zt.shift();ct=Zt.shift();ht=Zt.shift();t.peo=Zt.shift();t.pgho=Zt.shift();t.pho=Zt.shift();t.pinco=Zt.shift();t.plo=Zt.shift();pt=Zt.shift();t.se2=Zt.shift();t.se3=Zt.shift();t.sgh2=Zt.shift();t.sgh3=Zt.shift();t.sgh4=Zt.shift();t.sh2=Zt.shift();t.sh3=Zt.shift();t.si2=Zt.shift();t.si3=Zt.shift();t.sl2=Zt.shift();t.sl3=Zt.shift();t.sl4=Zt.shift();dt=Zt.shift();vt=Zt.shift();mt=Zt.shift();gt=Zt.shift();yt=Zt.shift();bt=Zt.shift();wt=Zt.shift();Et=Zt.shift();St=Zt.shift();xt=Zt.shift();Tt=Zt.shift();Nt=Zt.shift();Ct=Zt.shift();kt=Zt.shift();Lt=Zt.shift();At=Zt.shift();Ot=Zt.shift();Mt=Zt.shift();_t=Zt.shift();Dt=Zt.shift();Pt=Zt.shift();Ht=Zt.shift();Bt=Zt.shift();jt=Zt.shift();Ft=Zt.shift();It=Zt.shift();t.xgh2=Zt.shift();t.xgh3=Zt.shift();t.xgh4=Zt.shift();t.xh2=Zt.shift();t.xh3=Zt.shift();t.xi2=Zt.shift();t.xi3=Zt.shift();t.xl2=Zt.shift();t.xl3=Zt.shift();t.xl4=Zt.shift();qt=Zt.shift();Rt=Zt.shift();Ut=Zt.shift();zt=Zt.shift();Wt=Zt.shift();Xt=Zt.shift();Vt=Zt.shift();$t=Zt.shift();Jt=Zt.shift();Kt=Zt.shift();Qt=Zt.shift();Gt=Zt.shift();Yt=Zt.shift();t.zmol=Zt.shift();t.zmos=Zt.shift();Zt=dpper(t.e3,t.ee2,t.peo,t.pgho,t.pho,t.pinco,t.plo,t.se2,t.se3,t.sgh2,t.sgh3,t.sgh4,t.sh2,t.sh3,t.si2,t.si3,t.sl2,t.sl3,t.sl4,t.t,t.xgh2,t.xgh3,t.xgh4,t.xh2,t.xh3,t.xi2,t.xi3,t.xl2,t.xl3,t.xl4,t.zmol,t.zmos,tt,t.init,t.ecco,t.inclo,t.nodeo,t.argpo,t.mo);t.ecco=Zt.shift();t.inclo=Zt.shift();t.nodeo=Zt.shift();t.argpo=Zt.shift();t.mo=Zt.shift();en=0;tn=0;nn=0;Zt=dsinit(it,ct,t.argpo,dt,vt,mt,gt,yt,rt,Et,St,xt,Tt,Nt,Lt,Ot,Mt,Dt,Pt,Bt,jt,It,t.t,et,t.gsto,t.mo,t.mdot,t.no,t.nodeo,t.nodedot,Z,Rt,zt,Wt,Vt,$t,Kt,Qt,Yt,lt,en,tt,nn,qt,tn,t.ecco,O);lt=Zt.shift();en=Zt.shift();tt=Zt.shift();nn=Zt.shift();qt=Zt.shift();tn=Zt.shift();t.irez=Zt.shift();t.atime=Zt.shift();t.d2201=Zt.shift();t.d2211=Zt.shift();t.d3210=Zt.shift();t.d3222=Zt.shift();t.d4410=Zt.shift();t.d4422=Zt.shift();t.d5220=Zt.shift();t.d5232=Zt.shift();t.d5421=Zt.shift();t.d5433=Zt.shift();t.dedt=Zt.shift();t.didt=Zt.shift();t.dmdt=Zt.shift();rn=Zt.shift();t.dnodt=Zt.shift();t.domdt=Zt.shift();t.del1=Zt.shift();t.del2=Zt.shift();t.del3=Zt.shift();t.xfact=Zt.shift();t.xlamo=Zt.shift();t.xli=Zt.shift();t.xni=Zt.shift()}if(t.isimp!==1){sn=t.cc1*t.cc1;t.d2=4*N*q*sn;on=t.d2*q*t.cc1/3;t.d3=(17*N+B)*on;t.d4=.5*on*N*q*(221*N+31*B)*t.cc1;t.t3cof=t.d2+2*sn;t.t4cof=.25*(3*t.d3+t.cc1*(12*t.d2+10*sn));t.t5cof=.2*(3*t.d4+12*t.cc1*t.d3+6*t.d2*t.d2+15*sn*(2*t.d2+sn))}}if(t.error===0){Zt=sgp4(t,0);t=Zt.shift();un=Zt.shift();an=Zt.shift()}t.init="n";return t}function handleFileSelect(e){"use strict";var t=e.target.files,n,r;for(var n=0,i;i=t[n];n++){var r=new FileReader;r.onload=function(e){return function(e){document.getElementById("tle-lines").value=e.target.result}}(i);r.readAsText(i)}}function getTLELines(e){"use strict";var t,n=document.getElementById(e).textContent;return document.all?n.split("\r\n"):n.split("\n")}function testmat(){"use strict";var e="NO opsmode",t="NO typerun",n="NO typeinput",r="NO whichconst",i="OMFG WE DON'T HAVE AN infilename",s,o,u,a,f,l,c,h,p,d=180/Math.PI,v,m=!0,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q;$=getTLELines("tle-lines");opsmode=input("opsmode");t=input("typerun");t==="m"?n=input("typeinput"):n="e";r=parseInt(input("whichconst"),10);s=getgravc(r);o=s.shift();u=s.shift();a=s.shift();f=s.shift();l=s.shift();c=s.shift();h=s.shift();p=s.shift();J=new Date;for(V=0;V<$.length;V+=1){K=new Date;$[V]=$[V].trim();if($[V]===""||$[V][0]==="#")continue;g=$[V];V+=1;y=$[V];V+=1;s=twoline2rv(r,g,y,t,n);E=s.shift();S=s.shift();x=s.shift();T=s.shift();outfile(sprintf("\n %d xx\n",E.satnum));fprintf1(sprintf(" %d\n",E.satnum));s=sgp4(E,0);E=s.shift();N=s.shift();C=s.shift();outfile(sprintf(" %16.8f %16.8f %16.8f %16.8f %12.9f %12.9f %12.9f\n",E.t,N[0],N[1],N[2],C[0],C[1],C[2]));k=S;Math.abs(k)>1e-8&&(k-=T);while(k<x&&E.error===0){k+=T;k>x&&(k=x);s=sgp4(E,k);E=s.shift();N=s.shift();C=s.shift();E.error>0&&fprintf1(sprintf("# *** error: tsince=%f *** code=%d   (satnum=%d)\n",k,E.error,E.satnum));if(E.error===0)if(t!=="v"&&t!=="c"){L=E.jdsatepoch+k/1440;s=invjday(L);A=s.shift();O=s.shift();M=s.shift();_=s.shift();D=s.shift();P=s.shift();outfile(sprintf(" %16.8f %16.8f %16.8f %16.8f %12.9f %12.9f %12.9f %5i%3i%3i %2i:%2i:%9.6f %16.8f%16.8f%16.8%12.9f%12.9f%12.9f\n",k,N[0],N[1],N[2],C[0],C[1],C[2],A,O,M,_,D,P))}else{outfile(sprintf(" %16.8f %16.8f %16.8f %16.8f %12.9f %12.9f %12.9f",k,N[0],N[1],N[2],C[0],C[1],C[2]));s=rv2coe(N,C,u);H=s.shift();B=s.shift();j=s.shift();F=s.shift();I=s.shift();q=s.shift();R=s.shift();U=s.shift();z=s.shift();W=s.shift();X=s.shift();outfile(sprintf(" %14.6f %8.6f %10.5f %10.5f %10.5f %10.5f %10.5f\n",B,j,F*d,I*d,q*d,R*d,U*d))}}debug("satnum="+E.satnum+" time="+(new Date-K)+"ms"+"  ellapsed time="+(new Date-J)+"ms")}}function twoline2rv(e,t,n,r,i){"use strict";var s=getgravc(e),o=s.shift(),u=s.shift(),a=s.shift(),f=s.shift(),l=s.shift(),c=s.shift(),h=s.shift(),p=s.shift(),d=Math.PI/180,v=1440/(2*Math.PI),m={},g=0,y=0,b=0,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y;xke=f;j2=l;if(typeof o=="undefined")throw new Error('Global "tumin" is undefined');if(typeof a=="undefined")throw new Error('Global "radiusearthkm" is undefined');if(typeof xke=="undefined")throw new Error('Global "xke" is undefined');if(typeof j2=="undefined")throw new Error('Global "j2" is undefined');if(typeof c=="undefined")throw new Error('Global "j3" is undefined');if(typeof h=="undefined")throw new Error('Global "j4" is undefined');if(typeof p=="undefined")throw new Error('Global "j3oj2" is undefined');m.error=0;t=t.split("");n=n.split("");for(w=10;w<=15;w+=1)t[w]===" "&&(t[w]="_");t[44]!==" "&&(t[43]=t[44]);t[44]=".";t[7]===" "&&(t[7]="U");t[9]===" "&&(t[9]=".");for(w=45;w<=49;w+=1)t[w]===" "&&(t[w]="0");t[51]===" "&&(t[51]="0");t[53]!==" "&&(t[52]=t[53]);t[53]=".";t[62]===" "&&(t[62]="0");if(t.length<68||t[67]===" ")t[67]="0";n[25]=".";for(w=26;w<=32;w+=1)n[w]===" "&&(n[w]="0");t=t.join("");n=n.join("");E=parseFloat(t[0]);m.satnum=parseFloat(t.slice(2,7));S=t[7];x=t.slice(9,17);m.epochyr=parseFloat(t.slice(18,20));m.epochdays=parseFloat(t.slice(20,32));m.ndot=parseFloat(t.slice(33,43));m.nddot=parseFloat(t.slice(43,50));T=parseFloat(t.slice(50,52));m.bstar=parseFloat(t.slice(52,59));N=parseFloat(t.slice(59,61));C=parseFloat(t.slice(62,63));y=parseFloat(t.slice(64,68));if(r==="v"){k=parseFloat(n.slice(0,1));m.satnum=parseFloat(n.slice(2,7));m.inclo=parseFloat(n.slice(7,16));m.nodeo=parseFloat(n.slice(16,25));m.ecco=parseFloat(n.slice(25,33));m.argpo=parseFloat(n.slice(33,42));m.mo=parseFloat(n.slice(42,51));m.no=parseFloat(n.slice(51,63));g=parseFloat(n.slice(63,68));L=parseFloat(n.slice(69,81));A=parseFloat(n.slice(82,96));O=parseFloat(n.slice(96,105))}else{k=parseFloat(n.slice(0,1));m.satnum=parseFloat(n.slice(2,7));m.inclo=parseFloat(n.slice(7,16));m.nodeo=parseFloat(n.slice(16,25));m.ecco=parseFloat(n.slice(25,33));m.argpo=parseFloat(n.slice(33,42));m.mo=parseFloat(n.slice(42,51));m.no=parseFloat(n.slice(51,63));g=parseFloat(n.slice(63,68))}m.no=m.no/v;m.nddot=m.nddot*Math.pow(10,T);m.bstar=m.bstar*Math.pow(10,N);m.a=Math.pow(m.no*o,-2/3);m.ndot=m.ndot/(v*1440);m.nddot=m.nddot/(v*1440*1440);m.inclo=m.inclo*d;m.nodeo=m.nodeo*d;m.argpo=m.argpo*d;m.mo=m.mo*d;m.alta=m.a*(1+m.ecco)-1;m.altp=m.a*(1-m.ecco)-1;m.epochyr<57?b=m.epochyr+2e3:b=m.epochyr+1900;s=days2mdh(b,m.epochdays);M=s.shift();_=s.shift();D=s.shift();P=s.shift();H=s.shift();m.jdsatepoch=jday(b,M,_,D,P,H);if(r!=="v"&&r!=="c"){if(i==="e"){B=input("input start year");j=input("input start mon");F=input("input start day");I=input("input start hr");q=input("input start min");R=input("input start sec");U=jday(B,j,F,I,q,R);z=input("input stop year");W=input("input stop mon");X=input("input stop day");V=input("input stop hr");$=input("input stop min");J=input("input stop sec");K=jday(z,W,X,V,$,J);L=(U-m.jdsatepoch)*1440;A=(K-m.jdsatepoch)*1440;O=input("input time step in minutes ")}if(i==="d"){B=input("input start year");Q=input("input start dayofyr");z=input("input stop year");G=input("input stop dayofyr");s=days2mdh(B,Q);M=s.shift();_=s.shift();D=s.shift();P=s.shift();H=s.shift();U=jday(B,M,_,D,P,H);s=days2mdh(z,G);M=s.shift();_=s.shift();D=s.shift();P=s.shift();H=s.shift();K=jday(z,M,_,D,P,H);L=(U-m.jdsatepoch)*1440;A=(K-m.jdsatepoch)*1440;O=input("input time step in minutes ")}if(i==="m"){L=input("input start mfe: ");A=input("input stop mfe: ");O=input("input time step in minutes: ")}if(i==="n"){var Z=new Date;U=jday(Z.getUTCFullYear(),Z.getUTCMonth(),Z.getUTCDay(),Z.getUTCHours(),Z.getUTCMinutes(),Z.getUTCSeconds());K=jday(Z.getUTCFullYear(),Z.getUTCMonth(),Z.getUTCDay(),Z.getUTCHours(),Z.getUTCMinutes(),(Z.getUTCSeconds()+1)%60);L=(U-m.jdsatepoch)*1440;A=(K-m.jdsatepoch)*1440;O=60;L=0;A=1}}if(r==="c"){L=-1440;A=1440;O=20}Y=m.jdsatepoch-2433281.5;m=sgp4init(e,m,m.bstar,m.ecco,Y,m.argpo,m.inclo,m.mo,m.no,m.nodeo);return[m,L,A,O]}typeof String.prototype.trim=="undefined"&&(String.prototype.trim=function(){"use strict";return this.replace(/^\s+|\s+$/g,"")});typeof String.prototype.ltrim=="undefined"&&(String.prototype.ltrim=function(){"use strict";return this.replace(/^\s+/,"")});typeof String.prototype.rtrim=="undefined"&&(String.prototype.rtrim=function(){"use strict";return this.replace(/\s+$/,"")});var re=6378.137,flat=1/298.257223563,omegaearth=7.292115e-11,mu=398600.4418,mum=3986004418e5,eccearth=Math.sqrt(2*flat-flat*flat),eccearthsqrd=eccearth*eccearth,renm=re/nm2m,reft=re*1e3/ft2m,tusec=Math.sqrt(Math.pow(re,3)/mu),tumin=tusec/60,tuday=tusec/86400,omegaearthradptu=omegaearth*tusec,omegaearthradpmin=omegaearth*60,velkmps=Math.sqrt(mu/re),velftps=velkmps*1e3/ft2m,velradpmin=velkmps*60/re,degpsec=180/Math.PI/tusec,radpday=2*Math.PI*1.002737909350795,speedoflight=299792458,au=149597870,earth2moon=384400,moonradius=1738,sunradius=696e3,masssun=1.9891e30,massearth=5.9742e24,massmoon=7.3483e22,small=1e-8,infinite=999999.9,UNDEFINED=999999.1,rad=180/Math.PI,twopi=2*Math.PI,halfpi=Math.PI*.5,ft2m=.3048,mile2m=1609.344,nm2m=1852,mile2ft=5280,mileph2kmph=.44704,nmph2kmph=.5144444,i,lmonth=[],dayofyr,i,inttemp,mon,day,temp,hr,minute,sec,julianday,sprintf=function(){"use strict";function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function t(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}var n=function(){n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0]));return n.format.call(null,n.cache[arguments[0]],arguments)};n.format=function(n,r){var i=1,s=n.length,o="",u,a=[],f,l,c,h,p,d;for(f=0;f<s;f++){o=e(n[f]);if(o==="string")a.push(n[f]);else if(o==="array"){c=n[f];if(c[2]){u=r[i];for(l=0;l<c[2].length;l++){if(!u.hasOwnProperty(c[2][l]))throw sprintf('[sprintf] property "%s" does not exist',c[2][l]);u=u[c[2][l]]}}else c[1]?u=r[c[1]]:u=r[i++];if(/[^s]/.test(c[8])&&e(u)!=="number")throw sprintf("[sprintf] expecting number but found %s",e(u));switch(c[8]){case"b":u=u.toString(2);break;case"c":u=String.fromCharCode(u);break;case"d":u=parseInt(u,10);break;case"e":u=c[7]?u.toExponential(c[7]):u.toExponential();break;case"f":u=c[7]?parseFloat(u).toFixed(c[7]):parseFloat(u);break;case"o":u=u.toString(8);break;case"s":u=(u=String(u))&&c[7]?u.substring(0,c[7]):u;break;case"u":u=Math.abs(u);break;case"x":u=u.toString(16);break;case"X":u=u.toString(16).toUpperCase()}u=/[def]/.test(c[8])&&c[3]&&u>=0?"+"+u:u;p=c[4]?c[4]==="0"?"0":c[4].charAt(1):" ";d=c[6]-String(u).length;h=c[6]?t(p,d):"";a.push(c[5]?u+h:h+u)}}return a.join("")};n.cache={};n.parse=function(e){var t=e,n=[],r=[],i=0;while(t){if((n=/^[^\x25]+/.exec(t))!==null)r.push(n[0]);else if((n=/^\x25{2}/.exec(t))!==null)r.push("%");else{if((n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))===null)throw"[sprintf] huh?";if(n[2]){i|=1;var s=[],o=n[2],u=[];if((u=/^([a-z_][a-z_\d]*)/i.exec(o))===null)throw"[sprintf] huh?";s.push(u[1]);while((o=o.substring(u[0].length))!=="")if((u=/^\.([a-z_][a-z_\d]*)/i.exec(o))!==null)s.push(u[1]);else{if((u=/^\[(\d+)\]/.exec(o))===null)throw"[sprintf] huh?"
;s.push(u[1])}n[2]=s}else i|=2;if(i===3)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(n)}t=t.substring(n[0].length)}return r};return n}(),vsprintf=function(e,t){"use strict";t.unshift(e);return sprintf.apply(null,t)},xke,j2,tle={content:null,lines:null,tles:null,readFile:function(e){var t=new XMLHttpRequest,n=!1;t.open("GET",e,n);t.send();if(t.status!==200)return null;this.content=t.responseText;return this.content},readFileLines:function(e){this.readFile(e);this.lines=this.content.split("\n");return this.lines},parseFile:function(e){var t=this.readFileLines(e),n,r=[],i=[];for(linenum=0;linenum<t.length;linenum++)if(t[linenum].substring(0,2)==="1 ")r[1]=t[linenum];else if(t[linenum].substring(0,2)==="2 "){r[2]=t[linenum];i.push(r);r=[]}else r[0]=t[linenum];this.tles=i;return i}};